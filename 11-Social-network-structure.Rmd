
# Social network structure

<!-- Explaining fundamentals of networks -->
In the previous chapter, we have introduced the concept of group structured populations. Here, we want to go one step further and look at the fine-grained interactions at the individual level. Similartly to chapter \@ref(#group-structure) some individuals are more likely to interact with some than with other individuals. This could be based on personl experiences or preferences but also on spatial or temporal distribution of individuals. 

A common way to visualise structure on the individual level are networks, where individuals are represented by nodes and their interactions or relationhsips are depicted by edges (or links). Depending on the number of edges (connections) an individaul might be able to interact with more or fewer or specific individuals. In fact, the use of networks has greatly improved our understanding of the spread of dieseases and has rekindled the interest in game theory (e.g. netwokred Prisoners Dilemma).

In our case, edges will allow or prohibit the information transmission from one individual to another. We would expect that different networks (e.g. many edges versus few edges) will affect information transmission differently. 

In this chapter, we will generate, plot, and analyse networks. Then we will model information diffusion through networked populations and how diffusion might differ from dynamics in fully connected populations. 

<!-- Generate simple networks from text -->
To generate and plot networks, we wil use the `igraph` package that provides many useful functions. The simplest function to generate a network is called `graph_from_literal()`, which takes, for example, names and generates a network based on wheter these names are connected with each othe (using `--`). (Note: instead of names we could have also used letters or even numbers.) In the example below, we generate a friendship network, where each node represents an individual and each edge a strong reciprocal friendship. We store the generated network in **net**, and then apply the `plot` function to have a look at the network.

```{r 11.1}
library(igraph)
net <- graph_from_literal(Iris--Eva--Anna, 
                          Jacob--Pete--Felix, 
                          Julia--Anna--Mia, 
                          Anna--Iris, 
                          Anna--Pete,
                          Julia--Mia)
plot(net)
```

<!-- Plot networks, with different styling explained -->
Let us edit the look of the network a bit. 

```{r 11.2}
plot(net, 
     vertex.color="white", 
     vertex.size=42,
     edge.color="black",
     edge.width=3)
```

Plotting the network makes it much easier to see the overall structure and important nodes. Here, for example, we can quickly see that Anna is the most connected individual in the group with four connections.

Let us take a closer look at the network object. We can use the `V()` function to look at the vertices and the `E()` function to look at the edges that are stored in **net**. 

```{r 11.3}
V(net)
E(net)
```

The output tells us that there are eight named vertices and nine edges stored. The functions also tell us the names of the vertices and which nodes each edge connects. The functions can be used to return stored information in the **net** object (try, for example, `V(net)$name`) but also to store additional information. For example, let us add the information whether a node represents a girl or a boy. 

```{r 11.4}
V(net)$sex <- "girl"
V(net)$sex[ V(net)$name %in% c("Felix","Jacob","Pete") ] <- "boy"
V(net)$sex
```

In the first line, we create a new node variable as part of the **net** object, called 'sex.' We set this variable to be 'girl' for all entries. In the next line we replace all 'girl' entries with 'boy' where the name of the vertex is one of the three boy names. We can now use this information to change the colour of the nodes depending on their sex.

```{r 11.5}
V(net)$col <- 'dodgerblue'
V(net)$col[ V(net)$sex=="boy" ] <- 'firebrick3'

plot(net, 
     vertex.color=V(net)$col, 
     vertex.size=42,
     vertex.label.color="white",
     edge.color="black",
     edge.width=3)
```

With the added colour, we can now see that there is a divide between boys and girls and we can see that Anna and Pete connect the two subsets. There are of course many other ways to change the appearence of the network, which we will try out as we go a long this chapter. First, however, let us try to generate larger networks. 

<!-- Generate simple networks from matrix -->
A second function that allows to generate simple networks is 
```{r}
m <- matrix(sample(x=0:1, size=25, replace=T), ncol=5)
net <- graph_from_adjacency_matrix(adjmatrix=m)
plot(net, 
     vertex.color="gold")
#randomly generated, matrix based
#see, arrows
#can make them undirected
plot(as.undirected(net))
#see, self-arrows
#can get rid of self-loops
plot(simplified(net))
#which is the same as setting the diagonal of m to be 0
diag(m) <- 0
net <- graph_from_adjacency_matrix(adjmatrix=m)
plot(net, 
     vertex.color="gold")
```


<!-- Generate random networks, scale-free, small world networks -->
```{r}
#make ring
net_ring <- make_ring(n=25)
plot(net_ring, vertex.color="gold")
#make lattice
net_lat <- make_lattice(dimvector=c(3,5))
plot(net_lat, vertex.color="gold")
#make random
net_rand <- erdos.renyi.game(n=25, p.or.m=.15, type="gnp")
plot(net_rand, vertex.color="gold")
#make scale-free
net_scale <- barabasi.game(n=25, power=3, m=2, directed=FALSE)
plot(net_scale, vertex.color="gold")
#make small-world
net_small <- watts.strogatz.game(dim=1, size=25, nei=2, p=.05)
plot(net_small, vertex.color="gold")
```


<!-- How to characterise networks - Degree, path length, transitivity, centrality measures -->

<!-- How to simulate transmission of information along the edges of a network -->

<!-- Combining the previous two sections, how do different network characteristics affect informatin diffusion?; Compare with Full Graph -->

<!-- Finally, let networks dynamically change over time -->

<!-- Further Reading -->